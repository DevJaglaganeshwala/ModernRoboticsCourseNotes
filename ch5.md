---
layout: post
mathjax: true
title: 'Chapter 5: Velocity Kinematics and Statics'
description: Modern Robotics Course Notes
is_project_page: false
---

<p style="text-align:center;">
<button type="button" onclick="window.location.href='index.html';">Homepage</button>
<span style="float:left;"><button type="button" onclick="window.location.href='ch4.html';">Previous</button></span>
<span style="float:right;"><button type="button" onclick="alert('This is the last chapter!')">Next</button></span>
</p>

## Introduction

### Jacobian Matrices
Here we introduce the concept of **Jacobian** matrix. To help understand, the end-effector configuration is represented by a minimal set of parameters as: $x(t)$, which is the function of time $t$. Based on the forward kinematics introduced in the last chapter, this configuration can be calculated from the set of joint variables:

$$
x(t) = f(\theta(t))
$$

The time derivative of $x$ is named the tip velocity $v_{tip}$, it can be calculated as:

$$
\begin{aligned}
    v_{tip} & = \dot{x} \\
            & = \frac{\partial f(\theta)}{\partial \theta} \frac{d\theta(t)}{dt} \\
            & = J(\theta) \dot{\theta}
\end{aligned}
$$

$J(\theta) \in \mathbb{R}^{m\times n}$ is the Jacobian matrix of $f(\theta) \in \mathbb{R}^m$, where $\theta \in \mathbb{R}^n$. Generally, $J(\theta)$ is defined and arranged as <sup>[1]</sup>:

$$
\begin{aligned}
    J(\theta) & = \left[\begin{matrix} \frac{\partial f}{\partial \theta_1} & \cdots & \frac{\partial f}{\partial \theta_n} \end{matrix}\right] \\
              & = \left[\begin{matrix} \frac{\partial f_1}{\partial \theta_1} & \cdots & \frac{\partial f_1}{\partial \theta_n} \\ \vdots & \ddots & \vdots \\ \frac{\partial f_m}{\partial \theta_1} & \cdots & \frac{\partial f_m}{\partial \theta_n} \\ \end{matrix}\right]
\end{aligned}
$$

#### Several Notes for Jacobian matrices

* If two rows or columns of the Jacobian matrix become aligned, such configurations are called **singularities**, which *are characterized by a situation where the robot tip is unable to generate velocities in certain directions*. 
  * In this case, the Jacobian matrix is a singular matrix, which does not have a *matrix inverse*. *A matrix is singular iff its determinant is 0* <sup>[2]</sup>.

* Column $i$ of the Jacobian corresponds to the end-effector velocity when joint $i$ moves at unit speed and all other joints are stationary.

### Manipulability Ellipsoid

If we limit the joint velocities $\theta_i \in \theta$ in a shpere (or hypersphere if $\theta$ is more than 3 dimensions), Jacobian can map these limits to the limits of tip velocities $\dot{x_i} \in \dot{x}$, which, in general, is an ellipsiod (or hyperellipsoid if \dot{x} is more than 3 dimensions). This ellipsoid is called **manipulability ellipsoid**. A 2R arm example is shown below:

![ch5_f1]()

Manipulability ellipsoid describes how close a posture is to a singularity. The closer the ellipsoid is to a circle, the more easily the end-effector can move in arbitrary directions. In contrast, when the configuration reaches singularity, the ellipsoid collapses to a line segment, and the volume of the ellipsiod is zero.

### Force Ellipsoid

Jacobian matrices can also be used for static analysis. Assuming the robot is at equilibrium, the power generated by an externel force applied on the tip must be equal to the power generated at the joints. Based on this, we can calculate the joint torque $\tau$ needed to generate the desired tip force $f_{tip}$ by:

$$\tau = J^{T}(\theta) f_{tip}$$

where $J^{T}(\theta)$ is the transpose of the Jacobian matrix.

In the other hand, we can determine the generated tip force with given joint torques by:

$$f_{tip} = J^{-T}(\theta) \tau$$

where $J^{-T}(\theta)$ is the inverse transpose of the Jacobian matrix.

Similarly, if we constrain the joint torque in a shpere (or hypersphere if $\tau$ is more than 3 dimensions), Jacobian(actually the inverse transpose of the Jacobian) can map these limits to the limits of the tip force, which, in general, is a ellipsoid (or hyperellipsoid if $f_{tip}$ is more than 3 dimensions). This ellipsoid is called **force ellipsoid**. 

Unlike manipulability ellipsoid, at a singularity, the force ellipsoid becomes infinitely long and skinny in the othogonal direction to the manipulability ellipsoid (which is a line segment), and its area goes to infinity. This situation means *the end-effector cannot move in one or more directions. Therefore, the robot can resist arbitrary forces trying to move it in one of these directions (without applying forces and torques at the joints)* - When carrying something heavy, it's always easier to put the arm straight down!

#### Relationship Between Manipulability Ellipsoid and Force Ellipsoid

*For a given robot configuration, the principle axes of the manipulability ellipsoid and the force ellipsoid are aligned, and the lengths of the principal semi-axes of the force ellipsoid are the reciprocals of the lengths of the principal semi-axes of the manipulability ellipsoid*.

***

## References

[1] [Jacobian matrix and determinant (Wikipedia)](https://en.wikipedia.org/wiki/Jacobian_matrix_and_determinant)

[2] [Singular Matrix (Wolfram MathWorld)](http://mathworld.wolfram.com/SingularMatrix.html)